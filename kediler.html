<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sarƒ± Papatyam</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary-yellow: #FFD700; --soft-yellow: #FFF9E3; --dark-text: #5D5326; --accent-gold: #DAA520; }
        body { margin: 0; font-family: 'Poppins', sans-serif; background-color: var(--soft-yellow); color: var(--dark-text); overflow-x: hidden; }
        .flower-field { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; }
        .falling-flower { position: absolute; top: -50px; font-size: 25px; animation: fall linear forwards; }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }
        .container { max-width: 700px; margin: 50px auto; padding: 20px; text-align: center; }
        h1 { font-family: 'Dancing Script', cursive; font-size: 4rem; color: #B8860B; }
        .anniversary-card { background: white; padding: 30px; border-radius: 50px 0 50px 0; box-shadow: 10px 10px 0px var(--primary-yellow); margin: 30px 0; }
        .days-count { font-size: 3.5rem; font-weight: 800; color: var(--accent-gold); display: block; }
        .flower-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 30px 0; }
        .flower-grid img { width: 100%; height: 200px; object-fit: cover; border-radius: 15px; border: 4px solid white; }
        
        /* NOT B√ñL√úM√ú */
        .note-section { background: white; padding: 25px; border-radius: 25px; margin: 30px 0; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 2px solid var(--primary-yellow); }
        textarea { width: 90%; height: 80px; border: 1px solid #ddd; border-radius: 15px; padding: 12px; font-family: 'Poppins'; margin-bottom: 10px; resize: none; outline: none; }
        #savedNote { margin-top: 15px; padding: 15px; background: #FFF9E3; border-radius: 15px; color: #B8860B; font-weight: 600; display: none; animation: fadeIn 0.5s; }

        .surprise-btn { background: var(--primary-yellow); color: var(--dark-text); border: none; padding: 15px 30px; font-size: 1rem; font-weight: bold; border-radius: 50px; cursor: pointer; transition: 0.3s; margin: 5px; }
        .surprise-btn:hover { transform: translateY(-3px); background: var(--accent-gold); color: white; }
        .final-quote { font-family: 'Dancing Script', cursive; font-size: 2.2rem; color: #B8860B; margin-top: 40px; }

        /* KALP ANƒ∞MASYONU */
        #heart-container { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 200; }
        .heart-svg { width: 300px; height: 300px; }
        .heart-path { stroke: var(--primary-yellow); stroke-width: 5; fill: none; stroke-dasharray: 1000; stroke-dashoffset: 1000; }
        .animate-heart { animation: drawHeart 3s linear forwards; }
        @keyframes drawHeart { from { stroke-dashoffset: -1000; } to { stroke-dashoffset: 0; } }
        .heart-text { position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%); font-family: 'Dancing Script', cursive; font-size: 2rem; color: #B8860B; opacity: 0; white-space: nowrap; }
        .fade-in-text { animation: fadeIn 1s ease-in forwards 2.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        #overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 100; }
    </style>
</head>
<body>
    <div class="flower-field" id="flower-field"></div>
    <div id="overlay" onclick="closeHeart()"></div>

    <div id="heart-container">
        <svg class="heart-svg" viewBox="0 0 200 200">
            <path class="heart-path" id="main-heart" d="M100 170 C100 170 20 120 20 65 C20 40 40 20 65 20 C80 20 95 30 100 45 C105 30 120 20 135 20 C160 20 180 40 180 65 C180 120 100 170 100 170 Z"></path>
        </svg>
        <div class="heart-text" id="heart-text">seviyorum seni</div>
    </div>

    <div class="container">
        <h1>Sarƒ± Papatyam</h1>
        <div class="anniversary-card">
            <span class="days-count" id="days-display">0. G√ºn</span>
            <p style="margin: 0; font-weight: 600; color: #888;">29 Ocak 2026'dan Beri...</p>
        </div>

        <div class="flower-grid">
            <img src="https://images.pexels.com/photos/1366630/pexels-photo-1366630.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Sarƒ± √ái√ßek">
            <img src="https://images.pexels.com/photos/1390433/pexels-photo-1390433.jpeg?auto=compress&cs=tinysrgb&w=400" alt="Papatya">
        </div>

        <div class="note-section">
            <h3 style="margin-top:0;">Birbirimize Not Bƒ±rakalƒ±m ‚úçÔ∏è</h3>
            <textarea id="noteInput" placeholder="Mesajƒ±nƒ± buraya yaz..."></textarea><br>
            <button class="surprise-btn" onclick="sendNote()">G√∂nder</button>
            <div id="savedNote">Sana gelen mesaj: <br> <span id="noteText" style="font-style: italic;"></span></div>
        </div>

        <button class="surprise-btn" onclick="drawYellowHeart()">Bana tƒ±kla... üíõ</button>
        <button class="surprise-btn" style="background: #333; color: white;" onclick="window.location.href='kediler.html'">Bizim Hikayemiz... üêæ</button>

        <div class="final-quote">"Ya≈üamƒ±n Bir Sebebi varsa O sebep sensin"</div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // FIREBASE KURULUMU
        const firebaseConfig = { databaseURL: "https://notgonder-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        function sendNote() {
            const note = document.getElementById('noteInput').value;
            if(note) {
                database.ref('lastNote').set({ text: note, time: Date.now() });
                document.getElementById('noteInput').value = "";
                alert("Mesajƒ±n ba≈üarƒ±yla iletildi! ‚ù§Ô∏è");
            }
        }

        database.ref('lastNote').on('value', (snapshot) => {
            const data = snapshot.val();
            if(data) {
                document.getElementById('savedNote').style.display = 'block';
                document.getElementById('noteText').innerText = data.text;
            }
        });

        // Dƒ∞ƒûER FONKSƒ∞YONLAR
        const startDate = new Date(2026, 0, 29);
        function updateDays() {
            const now = new Date();
            const diffDays = Math.floor((now - startDate) / (1000 * 60 * 60 * 24));
            document.getElementById("days-display").innerText = (diffDays > 0 ? diffDays : 0) + ". G√ºn";
        }
        updateDays();

        function drawYellowHeart() {
            document.getElementById('heart-container').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('main-heart').classList.add('animate-heart');
            document.getElementById('heart-text').classList.add('fade-in-text');
        }

        function closeHeart() {
            document.getElementById('heart-container').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }

        setInterval(() => {
            const f = document.createElement('div');
            f.className = 'falling-flower'; f.innerText = 'üåº';
            f.style.left = Math.random() * 100 + 'vw';
            f.style.animationDuration = (Math.random() * 2 + 3) + 's';
            document.getElementById('flower-field').appendChild(f);
            setTimeout(() => f.remove(), 5000);
        }, 400);
    </script>
</body>
</html>
